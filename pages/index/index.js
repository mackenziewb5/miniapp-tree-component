Page({
  data: {
    types:'add',
    treeData: [{
        id: "2298",
        parentCode: null,
        catCode: "1",
        catName: "百货",
        children: [{
            id: "2335",
            parentCode: "1",
            catCode: "101",
            catName: "美妆个护",
            children: [{
                id: "2470",
                parentCode: "101",
                catCode: "10101",
                catName: "护肤",
                children: [{
                    id: "2506",
                    parentCode: "10101",
                    catCode: "1010101",
                    catName: "面膜",
                    children: [{
                        id: "2818",
                        parentCode: "1010101",
                        catCode: "101010101",
                        catName: "贴片面膜",
                        children: [

                        ]
                      },
                      {
                        id: "2819",
                        parentCode: "1010101",
                        catCode: "101010102",
                        catName: "涂抹面膜",
                        children: [

                        ]
                      }
                    ]
                  },
                  {
                    id: "2507",
                    parentCode: "10101",
                    catCode: "1010102",
                    catName: "防晒",
                    children: [{
                        id: "2814",
                        parentCode: "1010102",
                        catCode: "101010201",
                        catName: "防晒喷雾",
                        children: [

                        ]
                      },
                      {
                        id: "2815",
                        parentCode: "1010102",
                        catCode: "101010202",
                        catName: "防晒霜",
                        children: [

                        ]
                      }
                    ]
                  },
                ]
              },
              {
                id: "2471",
                parentCode: "101",
                catCode: "10102",
                catName: "美妆",
                children: [{
                    id: "2520",
                    parentCode: "10102",
                    catCode: "1010201",
                    catName: "面部彩妆",
                    children: [{
                        id: "3013",
                        parentCode: "1010201",
                        catCode: "101020101",
                        catName: "隔离/妆前乳",
                        children: [

                        ]
                      },
                      {
                        id: "3014",
                        parentCode: "1010201",
                        catCode: "101020102",
                        catName: "粉底液",
                        children: [

                        ]
                      },
                      {
                        id: "3015",
                        parentCode: "1010201",
                        catCode: "101020103",
                        catName: "气垫",
                        children: [

                        ]
                      },
                      {
                        id: "3016",
                        parentCode: "1010201",
                        catCode: "101020104",
                        catName: "粉饼",
                        children: [

                        ]
                      },
                      {
                        id: "3017",
                        parentCode: "1010201",
                        catCode: "101020105",
                        catName: "遮瑕",
                        children: [

                        ]
                      },
                      {
                        id: "3018",
                        parentCode: "1010201",
                        catCode: "101020106",
                        catName: "高光/阴影",
                        children: [

                        ]
                      },
                      {
                        id: "3019",
                        parentCode: "1010201",
                        catCode: "101020107",
                        catName: "腮红/胭脂",
                        children: [

                        ]
                      },
                      {
                        id: "3020",
                        parentCode: "1010201",
                        catCode: "101020108",
                        catName: "散粉/蜜粉/定妆",
                        children: [

                        ]
                      }
                    ]
                  },
                  {
                    id: "2521",
                    parentCode: "10102",
                    catCode: "1010202",
                    catName: "眼部彩妆",
                    children: [{
                        id: "3021",
                        parentCode: "1010202",
                        catCode: "101020201",
                        catName: "眼影",
                        children: [

                        ]
                      },
                      {
                        id: "3022",
                        parentCode: "1010202",
                        catCode: "101020202",
                        catName: "眼线",
                        children: [

                        ]
                      },
                      {
                        id: "3023",
                        parentCode: "1010202",
                        catCode: "101020203",
                        catName: "眉笔/眉粉/眉膏",
                        children: [

                        ]
                      },
                      {
                        id: "3024",
                        parentCode: "1010202",
                        catCode: "101020204",
                        catName: "睫毛膏",
                        children: [

                        ]
                      }
                    ]
                  },
                ]
              },
              {
                id: "2472",
                parentCode: "101",
                catCode: "10103",
                catName: "香水",
                children: [{
                    id: "2529",
                    parentCode: "10103",
                    catCode: "1010301",
                    catName: "女士香水",
                    children: [

                    ]
                  },
                  {
                    id: "2530",
                    parentCode: "10103",
                    catCode: "1010302",
                    catName: "男士香水",
                    children: [

                    ]
                  },
                  {
                    id: "2531",
                    parentCode: "10103",
                    catCode: "1010303",
                    catName: "中性香水",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2473",
                parentCode: "101",
                catCode: "10104",
                catName: "个人洗护",
                children: [{
                    id: "2532",
                    parentCode: "10104",
                    catCode: "1010401",
                    catName: "口腔护理",
                    children: [{
                        id: "2803",
                        parentCode: "1010401",
                        catCode: "101040101",
                        catName: "牙刷",
                        children: [

                        ]
                      },
                      {
                        id: "2804",
                        parentCode: "1010401",
                        catCode: "101040102",
                        catName: "牙膏",
                        children: [

                        ]
                      },
                      {
                        id: "2805",
                        parentCode: "1010401",
                        catCode: "101040103",
                        catName: "漱口水",
                        children: [

                        ]
                      },
                      {
                        id: "2806",
                        parentCode: "1010401",
                        catCode: "101040104",
                        catName: "口喷",
                        children: [

                        ]
                      },
                      {
                        id: "2807",
                        parentCode: "1010401",
                        catCode: "101040105",
                        catName: "牙线",
                        children: [

                        ]
                      }
                    ]
                  },
                  {
                    id: "2533",
                    parentCode: "10104",
                    catCode: "1010402",
                    catName: "身体护理",
                    children: [{
                        id: "2903",
                        parentCode: "1010402",
                        catCode: "101040201",
                        catName: "沐浴露",
                        children: [

                        ]
                      },
                      {
                        id: "2904",
                        parentCode: "1010402",
                        catCode: "101040202",
                        catName: "润肤皂",
                        children: [

                        ]
                      },
                      {
                        id: "2905",
                        parentCode: "1010402",
                        catCode: "101040203",
                        catName: "磨砂膏/沐浴盐",
                        children: [

                        ]
                      },
                      {
                        id: "2906",
                        parentCode: "1010402",
                        catCode: "101040204",
                        catName: "护肤精油",
                        children: [

                        ]
                      },
                      {
                        id: "2907",
                        parentCode: "1010402",
                        catCode: "101040205",
                        catName: "身体乳",
                        children: [

                        ]
                      },
                      {
                        id: "2908",
                        parentCode: "1010402",
                        catCode: "101040206",
                        catName: "手膜/足膜",
                        children: [

                        ]
                      },
                      {
                        id: "2909",
                        parentCode: "1010402",
                        catCode: "101040207",
                        catName: "护手霜",
                        children: [

                        ]
                      },
                      {
                        id: "2910",
                        parentCode: "1010402",
                        catCode: "101040208",
                        catName: "脱毛膏",
                        children: [

                        ]
                      },
                      {
                        id: "2911",
                        parentCode: "1010402",
                        catCode: "101040209",
                        catName: "脱毛器",
                        children: [

                        ]
                      },
                      {
                        id: "2912",
                        parentCode: "1010402",
                        catCode: "101040210",
                        catName: "走珠/止汗露",
                        children: [

                        ]
                      },
                      {
                        id: "2994",
                        parentCode: "1010402",
                        catCode: "101040211",
                        catName: "芦荟胶/凝胶",
                        children: [

                        ]
                      }
                    ]
                  },
                  {
                    id: "2534",
                    parentCode: "10104",
                    catCode: "1010403",
                    catName: "洗手液",
                    children: [{
                        id: "2921",
                        parentCode: "1010403",
                        catCode: "101040301",
                        catName: "冲洗洗手液",
                        children: [

                        ]
                      },
                      {
                        id: "2922",
                        parentCode: "1010403",
                        catCode: "101040302",
                        catName: "免洗洗手液",
                        children: [

                        ]
                      }
                    ]
                  },
                ]
              },
            ]
          },
          {
            id: "2336",
            parentCode: "1",
            catCode: "102",
            catName: "家居百货",
            children: [{
              id: "2477",
              parentCode: "102",
              catCode: "10202",
              catName: "家居日用",
              children: [{
                  id: "2553",
                  parentCode: "10202",
                  catCode: "1020201",
                  catName: "家纺布艺",
                  children: [{
                      id: "2968",
                      parentCode: "1020201",
                      catCode: "102020101",
                      catName: "抱枕靠垫",
                      children: [

                      ]
                    },
                    {
                      id: "2969",
                      parentCode: "1020201",
                      catCode: "102020102",
                      catName: "颈枕",
                      children: [

                      ]
                    },
                    {
                      id: "2970",
                      parentCode: "1020201",
                      catCode: "102020103",
                      catName: "床单被套",
                      children: [

                      ]
                    },
                    {
                      id: "3036",
                      parentCode: "1020201",
                      catCode: "102020104",
                      catName: "毛巾",
                      children: [

                      ]
                    },
                    {
                      id: "3037",
                      parentCode: "1020201",
                      catCode: "102020105",
                      catName: "浴巾",
                      children: [

                      ]
                    }
                  ]
                },
                {
                  id: "2554",
                  parentCode: "10202",
                  catCode: "1020202",
                  catName: "餐具杯壶",
                  children: [{
                      id: "2965",
                      parentCode: "1020202",
                      catCode: "102020201",
                      catName: "杯子",
                      children: [

                      ]
                    },
                    {
                      id: "2966",
                      parentCode: "1020202",
                      catCode: "102020202",
                      catName: "一次性杯子",
                      children: [

                      ]
                    },
                    {
                      id: "2967",
                      parentCode: "1020202",
                      catCode: "102020203",
                      catName: "碗盘碟",
                      children: [

                      ]
                    }
                  ]
                },
                {
                  id: "2555",
                  parentCode: "10202",
                  catCode: "1020203",
                  catName: "雨伞雨具",
                  children: [{
                    id: "2978",
                    parentCode: "1020203",
                    catCode: "102020301",
                    catName: "伞具",
                    children: [

                    ]
                  }]
                },
                {
                  id: "2556",
                  parentCode: "10202",
                  catCode: "1020204",
                  catName: "家居收纳",
                  children: [{
                      id: "2971",
                      parentCode: "1020204",
                      catCode: "102020401",
                      catName: "收纳箱/盒/瓶",
                      children: [

                      ]
                    },
                    {
                      id: "2972",
                      parentCode: "1020204",
                      catCode: "102020402",
                      catName: "衣架",
                      children: [

                      ]
                    }
                  ]
                },
                {
                  id: "2559",
                  parentCode: "10202",
                  catCode: "1020207",
                  catName: "鞋袜服饰",
                  children: [{
                      id: "2975",
                      parentCode: "1020207",
                      catCode: "102020701",
                      catName: "帽子",
                      children: [

                      ]
                    },
                    {
                      id: "2976",
                      parentCode: "1020207",
                      catCode: "102020702",
                      catName: "棉拖",
                      children: [

                      ]
                    },
                    {
                      id: "2977",
                      parentCode: "1020207",
                      catCode: "102020703",
                      catName: "袜子",
                      children: [

                      ]
                    },
                    {
                      id: "2998",
                      parentCode: "1020207",
                      catCode: "102020704",
                      catName: "手套",
                      children: [

                      ]
                    },
                    {
                      id: "3053",
                      parentCode: "1020207",
                      catCode: "102020705",
                      catName: "凉拖",
                      children: [

                      ]
                    },
                    {
                      id: "3060",
                      parentCode: "1020207",
                      catCode: "102020706",
                      catName: "一次性内裤",
                      children: [

                      ]
                    }
                  ]
                },
                {
                  id: "2637",
                  parentCode: "10202",
                  catCode: "1020209",
                  catName: "日用杂百",
                  children: [{
                      id: "3038",
                      parentCode: "1020209",
                      catCode: "102020901",
                      catName: "电池",
                      children: [

                      ]
                    },
                    {
                      id: "3039",
                      parentCode: "1020209",
                      catCode: "102020902",
                      catName: "其他日杂",
                      children: [

                      ]
                    },
                    {
                      id: "3078",
                      parentCode: "1020209",
                      catCode: "102020903",
                      catName: "扑克牌",
                      children: [

                      ]
                    },
                    {
                      id: "3079",
                      parentCode: "1020209",
                      catCode: "102020904",
                      catName: "数据线",
                      children: [

                      ]
                    }
                  ]
                },
                {
                  id: "3050",
                  parentCode: "10202",
                  catCode: "1020210",
                  catName: "家用电器",
                  children: [{
                    id: "3051",
                    parentCode: "1020210",
                    catCode: "102021001",
                    catName: "电吹风机",
                    children: [

                    ]
                  }]
                }
              ]
            }, ]
          },
        ]
      },
      {
        id: "2306",
        parentCode: "",
        catCode: "11",
        catName: "宠物食品/用品",
        children: [{
            id: "2644",
            parentCode: "11",
            catCode: "1101",
            catName: "猫/犬主食",
            children: [

            ]
          },
          {
            id: "2645",
            parentCode: "11",
            catCode: "1102",
            catName: "猫/犬零食",
            children: [

            ]
          },
          {
            id: "2646",
            parentCode: "11",
            catCode: "1103",
            catName: "宠物保健",
            children: [

            ]
          }
        ]
      },
      {
        id: "2300",
        parentCode: null,
        catCode: "3",
        catName: "饮料",
        children: [{
            id: "2466",
            parentCode: "3",
            catCode: "301",
            catName: "饮品",
            children: [{
                id: "2488",
                parentCode: "301",
                catCode: "30101",
                catName: "饮用水",
                children: [{
                    id: "2587",
                    parentCode: "30101",
                    catCode: "3010101",
                    catName: "天然矿泉水",
                    children: [

                    ]
                  },
                  {
                    id: "2588",
                    parentCode: "30101",
                    catCode: "3010102",
                    catName: "纯净水/蒸馏水",
                    children: [

                    ]
                  },
                  {
                    id: "2589",
                    parentCode: "30101",
                    catCode: "3010103",
                    catName: "苏打水",
                    children: [

                    ]
                  },
                  {
                    id: "2590",
                    parentCode: "30101",
                    catCode: "3010104",
                    catName: "含气天然矿泉水",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2489",
                parentCode: "301",
                catCode: "30102",
                catName: "茶饮料",
                children: [{
                    id: "2596",
                    parentCode: "30102",
                    catCode: "3010201",
                    catName: "果茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2597",
                    parentCode: "30102",
                    catCode: "3010202",
                    catName: "红茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2598",
                    parentCode: "30102",
                    catCode: "3010203",
                    catName: "绿茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2599",
                    parentCode: "30102",
                    catCode: "3010204",
                    catName: "乌龙茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2600",
                    parentCode: "30102",
                    catCode: "3010205",
                    catName: "凉茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2601",
                    parentCode: "30102",
                    catCode: "3010206",
                    catName: "奶茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2602",
                    parentCode: "30102",
                    catCode: "3010207",
                    catName: "大麦茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2603",
                    parentCode: "30102",
                    catCode: "3010208",
                    catName: "茉莉花茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2604",
                    parentCode: "30102",
                    catCode: "3010209",
                    catName: "普洱茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2923",
                    parentCode: "30102",
                    catCode: "3010210",
                    catName: "其他茶饮料",
                    children: [

                    ]
                  },
                  {
                    id: "3773",
                    parentCode: "30102",
                    catCode: "3010211",
                    catName: "菊花茶饮料",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2846",
                parentCode: "301",
                catCode: "30105",
                catName: "咖啡饮料",
                children: [{
                    id: "2931",
                    parentCode: "30105",
                    catCode: "3010501",
                    catName: "美式/黑咖啡饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2932",
                    parentCode: "30105",
                    catCode: "3010502",
                    catName: "拿铁咖啡饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2933",
                    parentCode: "30105",
                    catCode: "3010503",
                    catName: "摩卡咖啡饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2934",
                    parentCode: "30105",
                    catCode: "3010504",
                    catName: "卡布奇诺咖啡饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2935",
                    parentCode: "30105",
                    catCode: "3010505",
                    catName: "其他咖啡饮料",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2847",
                parentCode: "301",
                catCode: "30106",
                catName: "牛奶/豆乳/乳味饮料",
                children: [{
                    id: "2936",
                    parentCode: "30106",
                    catCode: "3010601",
                    catName: "豆乳饮料",
                    children: [

                    ]
                  },
                  {
                    id: "2937",
                    parentCode: "30106",
                    catCode: "3010602",
                    catName: "牛奶",
                    children: [

                    ]
                  },
                  {
                    id: "2938",
                    parentCode: "30106",
                    catCode: "3010603",
                    catName: "含乳饮料",
                    children: [

                    ]
                  },
                  {
                    id: "3775",
                    parentCode: "30106",
                    catCode: "3010604",
                    catName: "酸奶",
                    children: [

                    ]
                  }
                ]
              },
            ]
          },
          {
            id: "2835",
            parentCode: "3",
            catCode: "302",
            catName: "冲调",
            children: [{
                id: "2836",
                parentCode: "302",
                catCode: "30201",
                catName: "茶类",
                children: [{
                    id: "2852",
                    parentCode: "30201",
                    catCode: "3020101",
                    catName: "脂流茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2853",
                    parentCode: "30201",
                    catCode: "3020102",
                    catName: "红茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2854",
                    parentCode: "30201",
                    catCode: "3020103",
                    catName: "绿茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2855",
                    parentCode: "30201",
                    catCode: "3020104",
                    catName: "乌龙茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2856",
                    parentCode: "30201",
                    catCode: "3020105",
                    catName: "大麦茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2857",
                    parentCode: "30201",
                    catCode: "3020106",
                    catName: "玉米须茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2858",
                    parentCode: "30201",
                    catCode: "3020107",
                    catName: "水果茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "2859",
                    parentCode: "30201",
                    catCode: "3020108",
                    catName: "谷物/花草茶（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "3745",
                    parentCode: "30201",
                    catCode: "3020109",
                    catName: "玫瑰花（冲泡）",
                    children: [

                    ]
                  },
                  {
                    id: "3746",
                    parentCode: "30201",
                    catCode: "3020110",
                    catName: "菊花(冲泡）",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2837",
                parentCode: "302",
                catCode: "30202",
                catName: "咖啡",
                children: [{
                    id: "2862",
                    parentCode: "30202",
                    catCode: "3020201",
                    catName: "咖啡豆",
                    children: [

                    ]
                  },
                  {
                    id: "2863",
                    parentCode: "30202",
                    catCode: "3020202",
                    catName: "速溶咖啡粉",
                    children: [

                    ]
                  },
                  {
                    id: "2864",
                    parentCode: "30202",
                    catCode: "3020203",
                    catName: "咖啡液",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2838",
                parentCode: "302",
                catCode: "30203",
                catName: "冲泡奶茶",
                children: [

                ]
              },
              {
                id: "2839",
                parentCode: "302",
                catCode: "30204",
                catName: "麦片谷物",
                children: [{
                    id: "2865",
                    parentCode: "30204",
                    catCode: "3020401",
                    catName: "豆奶粉/豆浆粉",
                    children: [

                    ]
                  },
                  {
                    id: "2866",
                    parentCode: "30204",
                    catCode: "3020402",
                    catName: "可可粉",
                    children: [

                    ]
                  },
                  {
                    id: "2867",
                    parentCode: "30204",
                    catCode: "3020403",
                    catName: "燕麦片",
                    children: [

                    ]
                  },
                  {
                    id: "2868",
                    parentCode: "30204",
                    catCode: "3020404",
                    catName: "藕粉",
                    children: [

                    ]
                  },
                  {
                    id: "2869",
                    parentCode: "30204",
                    catCode: "3020405",
                    catName: "芝麻糊",
                    children: [

                    ]
                  },
                  {
                    id: "2870",
                    parentCode: "30204",
                    catCode: "3020406",
                    catName: "其他谷物冲饮",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2840",
                parentCode: "302",
                catCode: "30205",
                catName: "奶粉",
                children: [{
                    id: "2871",
                    parentCode: "30205",
                    catCode: "3020501",
                    catName: "成人奶粉",
                    children: [

                    ]
                  },
                  {
                    id: "2872",
                    parentCode: "30205",
                    catCode: "3020502",
                    catName: "儿童奶粉",
                    children: [

                    ]
                  }
                ]
              },
              {
                id: "2841",
                parentCode: "302",
                catCode: "30206",
                catName: "蜂蜜/蜂制品",
                children: [{
                    id: "2860",
                    parentCode: "30206",
                    catCode: "3020601",
                    catName: "蜂蜜/糖浆",
                    children: [

                    ]
                  },
                  {
                    id: "2861",
                    parentCode: "30206",
                    catCode: "3020602",
                    catName: "含蜂蜜制品",
                    children: [

                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        id: "2302",
        parentCode: null,
        catCode: "5",
        catName: "熟食",
        children: [

        ]
      },
    ]
  },
  resetTree(e) {
    this.setData({
      currentCheck: e.detail.checkedItem,
      treeData: e.detail.changeList
    })
    console.log(e, 'e')
    // 处理选中品类
    let selectedArr = this.getCheckedItemsArray(this.data.treeData)
    console.log(selectedArr, 'selectedArr')
    this.setData({
      ['tableForm.selectedCodeList']: selectedArr
    })
  },
    /**
   * 处理勾选的数据-转换成想要的传参形式
   * @param {Array} treeData - 树结构数据
   * @param {Array} checkedItems - 勾选的节点
   * @returns {Array} - 包含勾选节点的数组
   */
  getCheckedItemsArray: function (treeData) {
    let result = []

    function processNode(node, level = 0, path = {}) {
      // 如果节点勾选，则记录路径
      if (node.selected == 1) {
        // 更新路径对象
        path[classifyNoList[level]] = node.catCode || ''
        // 记录路径
        result.push({
          ...path
        })
      }

      // 如果节点勾选，处理完当前节点，停止继续遍历子节点
      if (node.selected == 1) {
        return
      }

      // 遍历子节点
      if (node.children) {
        node.children.forEach(child => {
          processNode(child, level + 1, {
            ...path,
            [classifyNoList[level]]: node.catCode || ''
          })
        })
      }
    }

    treeData.forEach(node => {
      processNode(node)
    })

    return result
  },

  // 筛选选中的品类
  getSelectedCode(treeData, arr = []) {
    treeData.forEach(item => {
      if (item.selected == 1) {
        if (item.children.length > 0) {
          this.getSelectedCode(item.children, arr)
        } else {
          arr.push(item.catCode)
        }
      } else {
        if (item.children.length > 0) {
          this.getSelectedCode(item.children, arr)
        }
      }
    })
    return arr
  },
})